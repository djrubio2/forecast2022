<head>
<title>2022 Senate Forecast</title>
    <meta name="viewport" content="initial-scale=1.0">

<script src="jquery.js"></script>
  <script src="raphael.js"></script>
    <script src="odometer.js"></script>
<link rel="stylesheet" href="odometer-theme-default.css" />

  <script src="jquery.usmap.js"></script>
</head>

<body>
<div id="container">

    <div id="topline">
        <h1 style="text-align:left">2022 Senate Forecast ðŸ—³</h1>
    <span style="font-family: Inconsolata;text-transform: uppercase">Last Updated 9-3-22</span>


            <h3 style="text-align: left">Chance of winning a majority:</h3>
        <div id="random">
        </div>
        <div class="dem">
            <span style="color:#292929;font-size: 10pt;text-align:left;">Democrats:</span>
            <br>
            <span id="toplineD" class="odometer">50</span><span>%</span>
        </div>
    <div class="gop">
        <span style="color:#292929;font-size: 10pt;text-align:left;">Republicans:</span>
        <br>
        <span id="toplineR" class="odometer">50</span><span>%</span>
    </div>
    <div id="bar">
        <div id="demProb"></div>
        <div id="tieProb"></div>
        <div id="repProb"></div>
    </div>
    <div class="dem">
        <span><span id="dSeatAvg" class="odometer">50</span></span>
        <br>
        <span style="color:#292929;font-size: 10pt;text-align:left;">Average Seats</span>
        </div>
    <div class="gop">
        <span><span id="rSeatAvg" class="odometer">50</span></span>
        <br>
        <span style="color:#292929;font-size: 10pt;text-align:left;">Average Seats</span>
    </div>
        <br>
        </div>
        <div id="info-container">
        
<div id="infobox" style="display: none">
    <span id="state"></span><div id="rating"></div>
    <div id="info" >
        <span style="color:#292929;font-size: 10pt;text-align:left;">Chance of winning:</span>
        <br>
        <div class="dem">
            <span id="probD"></span>
        </div>
        <div class="gop">
            <span id="probR"></span>
        </div>
    </div>
    <div id="bar2">
    </div>
    <span id="currentD"></span>
    <span style="color:#292929;font-size: 10pt;text-align:left;" id="dCand" ></span>
    <span id="currentR"></span>

    <span style="color:#292929;font-size: 10pt;text-align:right;float:right" id="rCand"></span>
    <hr>

    <div style="text-align: center">
        <span style="color:#292929;font-size: 10pt;text-align:left;">Est. Vote Margin:</span>
        <br>
        
        <span id="margin"></span>
    </div>

</div>  
        </div>
<div id="map-display">
        <div id="map" style="width:100%; height:500px;" onmouseout="hideInfo()"></div>
       
        <div id="keybox">
          <p style="text-align: left">Key</p>
          <table id ="key">
            <tr>
              <th>>50%</th>
              <th>>60%</th>
              <th>>70%</th>
              <th>>80%</th>
              <th>>90%</th>
            </tr>   
            <tr>
              <td style="border:2px solid;background-color: #dceaf8"></td>
              <td style="background-color: #b9d4f1"></td>
              <td style="background-color: #93c0e9"></td>
              <td style="background-color: #68ace2"></td>
              <td style="background-color: #2798da"></td>
            </tr>
            <tr>
              <td style="border:2px solid;background-color: #ffdfd6"></td>
              <td style="background-color: #ffbeae"></td>
              <td style="background-color: #ff9a85"></td>
              <td style="background-color: #ff715b"></td>
              <td style="background-color: #ff352c"></td>
            </tr> 
          </table>
        </div>
</div>
<div id="lower">
 
<h2>Likely Senate Composition</h2>
<div id="states-container" style="text-align:center;">
    <span>50 seats</span>
    <br>
    <div id="up"></div>
</div>
<div class="dem">
    <span style="font-size: 12pt" id="seatLabelD">â†‘ 36 Dem seats not up</span>
</div>
<div class="gop">
    <span style="font-size: 12pt" id="seatLabelR">30 GOP seats not up â†‘</span>
</div>
    
<br>
<br>
    <div style="text-align:center;">
        <button onclick="drawCurrentStates()">Current Senate</button>
    <button onclick="drawStates()">Forecasted Senate</button>
        
    </div>
    <hr>

<h2>Chance of Winning Over Time</h2>
    <iframe src="chart.html" width="100%"height="300px"></iframe>

            <p>This cycle starts with roughly the same chance of a Democratic majority as last cycle. Control of the Senate rests on a knife's edge. Democrats can only afford a net loss of one seat. Likewise, Republicans need to add just one seat to win a majority.</p>
<p>While the national environment should favor the GOP, poor candidate quality has plagued them in key races. Additionally, the <i>Dobbs</i> decision may be contributing to a more favorable environment for Democrats that once expected.</i></p>
<h2>About</h2>
    <p>This Senate forecast combines polling and fundamentals such as fundraising to predict the vote share. It then simulates 10,000 possible different outcomes.</p>         
<h2>Possible Outcomes</h2>
<table id ="dist">
  <tr>
    <th>D</th>
    <th>R</th>
    <th>Prob</th>
    <th style="width:350px;"></th>
  </tr>       
</table>
<h2>Notes</h2>
    <p>[1] Democrats currently control the Vice-Presidency, allowing them to split tied votes. This means the GOP will need to win an outright majority of 51 seats.</p>
    <p>[2] Evan McMullin of <span onmouseover="Georgia(31)" onmouseout="hideInfo()" id="tag">Utah</span> is an independent who has stated he will not caucus with either party.</p>
    <p>[3] In Alaska, four different candidates will face off using Ranked Choice Voting (RCV). The model gives the odds a Republican or Democrat will win, as there are multiple Republicans in the race.</p>
    </div>
</div>
</body>
<script>
var dSeatAvg = 51;
var rSeatAvg = 49;

var displayProbDem =73;
var displayProbTie =0;
var displayProbGOP = 100 - (displayProbDem+displayProbTie);

var index = 0;
var dist = [
  {
    "DEM": 42,
    "Prob %": 0
  },
  {
    "DEM": 43,
    "Prob %": 0
  },
  {
    "DEM": 44,
    "Prob %": 0
  },
  {
    "DEM": 45,
    "Prob %": 0.01
  },
  {
    "DEM": 46,
    "Prob %": 0.03
  },
  {
    "DEM": 47,
    "Prob %": 0.05
  },
  {
    "DEM": 48,
    "Prob %": 0.08
  },
  {
    "DEM": 49,
    "Prob %": 0.1
  },
  {
    "DEM": 50,
    "Prob %": 0.13
  },
  {
    "DEM": 51,
    "Prob %": 0.13
  },
  {
    "DEM": 52,
    "Prob %": 0.15
  },
  {
    "DEM": 53,
    "Prob %": 0.13
  },
  {
    "DEM": 54,
    "Prob %": 0.1
  },
  {
    "DEM": 55,
    "Prob %": 0.06
  },
  {
    "DEM": 56,
    "Prob %": 0.02
  },
  {
    "DEM": 57,
    "Prob %": 0
  },
  {
    "DEM": 58,
    "Prob %": 0
  },
  {
    "DEM": 59,
    "Prob %": 0
  }
];
var states = [
  {
    "State": "AL",
    "DemProb": 0,
    "RepProb": 1,
    "DEM": 30.72815738,
    "GOP": 69.27184262,
    "Marg": -38.54368525,
    "StateName": "Alabama",
    "DemCand": "Will Boyd",
    "RepCand": "Katie Britt",
    "SeatHolder": "R",
    "Incumbent": "N"
  },
  {
    "State": "AK",
    "DemProb": 0.0009,
    "RepProb": 0.9991,
    "DEM": 38.22806912,
    "GOP": 61.77193088,
    "Marg": -23.54386177,
    "StateName": "Alaska",
    "DemCand": "a Democrat",
    "RepCand": "a Republican",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "AR",
    "DemProb": 0,
    "RepProb": 1,
    "DEM": 29.6518255,
    "GOP": 70.3481745,
    "Marg": -40.69634901,
    "StateName": "Arkansas",
    "DemCand": "Natalie James",
    "RepCand": "John Boozman",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "AZ",
    "DemProb": 0.7924,
    "RepProb": 0.2076,
    "DEM": 52.85465575,
    "GOP": 47.14534425,
    "Marg": 5.709311493,
    "StateName": "Arizona",
    "DemCand": "Mark Kelly",
    "RepCand": "Blake Masters",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "CA",
    "DemProb": 0.9999,
    "RepProb": 0.0001,
    "DEM": 64.37317649,
    "GOP": 35.62682351,
    "Marg": 28.74635297,
    "StateName": "California",
    "DemCand": "Alex Padilla",
    "RepCand": "Mark Meuser",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "CO",
    "DemProb": 0.8693,
    "RepProb": 0.1307,
    "DEM": 53.95264524,
    "GOP": 46.04735476,
    "Marg": 7.905290472,
    "StateName": "Colorado",
    "DemCand": "Michael Bennet",
    "RepCand": "Joe O'Dea",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "CT",
    "DemProb": 0.9913,
    "RepProb": 0.0087,
    "DEM": 58.5511271,
    "GOP": 41.4488729,
    "Marg": 17.1022542,
    "StateName": "Connecticut",
    "DemCand": "Blumenthal",
    "RepCand": "Levy",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "FL",
    "DemProb": 0.317,
    "RepProb": 0.683,
    "DEM": 48.23742234,
    "GOP": 51.76257766,
    "Marg": -3.525155321,
    "StateName": "Florida",
    "DemCand": "Demmings",
    "RepCand": "Rubio",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "GA",
    "DemProb": 0.4832,
    "RepProb": 0.5168,
    "DEM": 49.78995797,
    "GOP": 50.21004203,
    "Marg": -0.420084065,
    "StateName": "Georgia",
    "DemCand": "Warnock",
    "RepCand": "Walker",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "HI",
    "DemProb": 1,
    "RepProb": 0,
    "DEM": 72.22935507,
    "GOP": 27.77064493,
    "Marg": 44.45871014,
    "StateName": "Hawaii",
    "DemCand": "Schatz",
    "RepCand": "McDermott",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "ID",
    "DemProb": 0,
    "RepProb": 1,
    "DEM": 25.0148139,
    "GOP": 74.9851861,
    "Marg": -49.97037221,
    "StateName": "Idaho",
    "DemCand": "Roth",
    "RepCand": "Crapo",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "IL",
    "DemProb": 0.9971,
    "RepProb": 0.0029,
    "DEM": 59.98437877,
    "GOP": 40.01562123,
    "Marg": 19.96875755,
    "StateName": "Illinois",
    "DemCand": "Duckworth",
    "RepCand": "Salvi",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "IN",
    "DemProb": 0.0005,
    "RepProb": 0.9995,
    "DEM": 37.39056156,
    "GOP": 62.60943844,
    "Marg": -25.21887688,
    "StateName": "Indiana",
    "DemCand": "McDermott",
    "RepCand": "Young",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "IA",
    "DemProb": 0.0518,
    "RepProb": 0.9482,
    "DEM": 44.07698894,
    "GOP": 55.92301106,
    "Marg": -11.84602213,
    "StateName": "Iowa",
    "DemCand": "Franken",
    "RepCand": "Grassley",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "KS",
    "DemProb": 0.0003,
    "RepProb": 0.9997,
    "DEM": 35.40476965,
    "GOP": 64.59523035,
    "Marg": -29.1904607,
    "StateName": "Kansas",
    "DemCand": "Holland",
    "RepCand": "Moran",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "KY",
    "DemProb": 0.0002,
    "RepProb": 0.9998,
    "DEM": 36.85546081,
    "GOP": 63.14453919,
    "Marg": -26.28907837,
    "StateName": "Kentucky",
    "DemCand": "Booker",
    "RepCand": "Paul",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "LA",
    "DemProb": 0,
    "RepProb": 1,
    "DEM": 35.63969083,
    "GOP": 64.36030917,
    "Marg": -28.72061833,
    "StateName": "Louisana",
    "DemCand": "a Democrat",
    "RepCand": "Kennedy",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "MD",
    "DemProb": 1,
    "RepProb": 0,
    "DEM": 65.50447464,
    "GOP": 34.49552536,
    "Marg": 31.00894927,
    "StateName": "Maryland",
    "DemCand": "Van Hollen",
    "RepCand": "Chaffee",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "MO",
    "DemProb": 0.0314,
    "RepProb": 0.9686,
    "DEM": 43.32452603,
    "GOP": 56.67547397,
    "Marg": -13.35094794,
    "StateName": "Missouri",
    "DemCand": "Busch Valentine",
    "RepCand": "Schmitt",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "NV",
    "DemProb": 0.6437,
    "RepProb": 0.3563,
    "DEM": 51.30638666,
    "GOP": 48.69361334,
    "Marg": 2.612773329,
    "StateName": "Nevada",
    "DemCand": "Cortez-Masto",
    "RepCand": "Laxalt",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "NH",
    "DemProb": 0.7265,
    "RepProb": 0.2735,
    "DEM": 52.17187149,
    "GOP": 47.82812851,
    "Marg": 4.34374298,
    "StateName": "New Hampshire",
    "DemCand": "Hassan",
    "RepCand": "Bouldoc",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "NY",
    "DemProb": 0.9997,
    "RepProb": 0.0003,
    "DEM": 62.36048711,
    "GOP": 37.63951289,
    "Marg": 24.72097422,
    "StateName": "New York",
    "DemCand": "Schumer",
    "RepCand": "Pinion",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "NC",
    "DemProb": 0.5014,
    "RepProb": 0.4986,
    "DEM": 49.94081958,
    "GOP": 50.05918042,
    "Marg": -0.1183608461,
    "StateName": "North Carolina",
    "DemCand": "Beasley",
    "RepCand": "Budd",
    "SeatHolder": "R",
    "Incumbent": "N"
  },
  {
    "State": "ND",
    "DemProb": 0,
    "RepProb": 1,
    "DEM": 21.17150631,
    "GOP": 78.82849369,
    "Marg": -57.65698739,
    "StateName": "North Dakota",
    "DemCand": "Christiansen",
    "RepCand": "Hoevan",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "OH",
    "DemProb": 0.4778,
    "RepProb": 0.5222,
    "DEM": 49.72433927,
    "GOP": 50.27566073,
    "Marg": -0.5513214566,
    "StateName": "Ohio",
    "DemCand": "Ryan",
    "RepCand": "Vance",
    "SeatHolder": "R",
    "Incumbent": "N"
  },
  {
    "State": "OK",
    "DemProb": 0,
    "RepProb": 1,
    "DEM": 17.58335507,
    "GOP": 82.41664493,
    "Marg": -64.83328986,
    "StateName": "Oklaholma",
    "DemCand": "a Democrat",
    "RepCand": "Lankford",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "OK1",
    "DemProb": 0,
    "RepProb": 1,
    "DEM": 28.81785087,
    "GOP": 71.18214913,
    "Marg": -42.36429826,
    "StateName": "Oklaholma Special",
    "DemCand": "Mullin",
    "RepCand": "Horn",
    "SeatHolder": "R",
    "Incumbent": "N"
  },
  {
    "State": "OR",
    "DemProb": 0.9979,
    "RepProb": 0.0021,
    "DEM": 60.36977963,
    "GOP": 39.63022037,
    "Marg": 20.73955926,
    "StateName": "Oregon",
    "DemCand": "Wyden",
    "RepCand": "Perkins",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "PA",
    "DemProb": 0.8487,
    "RepProb": 0.1513,
    "DEM": 53.64254057,
    "GOP": 46.35745943,
    "Marg": 7.285081135,
    "StateName": "Pennsylvania",
    "DemCand": "Fetterman",
    "RepCand": "Oz",
    "SeatHolder": "R",
    "Incumbent": "N"
  },
  {
    "State": "SC",
    "DemProb": 0.0001,
    "RepProb": 0.9999,
    "DEM": 36.09202745,
    "GOP": 63.90797255,
    "Marg": -27.81594511,
    "StateName": "South Carolina",
    "DemCand": "Matthews",
    "RepCand": "Scott",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "SD",
    "DemProb": 0,
    "RepProb": 1,
    "DEM": 27.91939763,
    "GOP": 72.08060237,
    "Marg": -44.16120473,
    "StateName": "South Dakota",
    "DemCand": "Thune",
    "RepCand": "Bengs",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "UT",
    "DemProb": 0.0359,
    "RepProb": 0.9641,
    "DEM": 43.40570038,
    "GOP": 56.59429962,
    "Marg": -13.18859924,
    "StateName": "Utah",
    "DemCand": "McMullin",
    "RepCand": "Lee",
    "SeatHolder": "R",
    "Incumbent": "R"
  },
  {
    "State": "VT",
    "DemProb": 1,
    "RepProb": 0,
    "DEM": 65.51525185,
    "GOP": 34.48474815,
    "Marg": 31.0305037,
    "StateName": "Vermont",
    "DemCand": "Welch",
    "RepCand": "Malloy",
    "SeatHolder": "D",
    "Incumbent": "N"
  },
  {
    "State": "WA",
    "DemProb": 0.7875,
    "RepProb": 0.2125,
    "DEM": 52.85845334,
    "GOP": 47.14154666,
    "Marg": 5.716906679,
    "StateName": "Washington",
    "DemCand": "Murray",
    "RepCand": "Smiley",
    "SeatHolder": "D",
    "Incumbent": "D"
  },
  {
    "State": "WI",
    "DemProb": 0.5235,
    "RepProb": 0.4765,
    "DEM": 50.14994983,
    "GOP": 49.85005017,
    "Marg": 0.2998996685,
    "StateName": "Wisconsin",
    "DemCand": "Barnes",
    "RepCand": "Johnson",
    "SeatHolder": "R",
    "Incumbent": "R"
  }
];
var states2 = copy(states);
    
function copy(x) { //copy the states to states2
    return JSON.parse( JSON.stringify(x) );
}
  
function stateSort(){ //sort the states by probability
    states2.sort(function (a, b) {
  return a.RepProb - b.RepProb;
});    
    }
    
$(document).on('mousemove', function(e){
   $('#infobox').offset({left: e.pageX-100, top: e.pageY-200})
});

$(document).ready(function() {
    drawStates();
    //update topline numbers
        document.getElementById("toplineD").innerHTML=Math.round(displayProbDem)+"%";
        document.getElementById("toplineR").innerHTML=Math.round(displayProbGOP)+"%";
        document.getElementById("dSeatAvg").innerHTML=dSeatAvg;
        document.getElementById("rSeatAvg").innerHTML=rSeatAvg;

        document.getElementById("demProb").style.width=displayProbDem+"%";
        document.getElementById("tieProb").style.width=displayProbTie+"%";
        document.getElementById("repProb").style.width=displayProbGOP+"%";

    for (x in dist) { 
        var fill;
        var letter;
        var letterR;
        var note;

        var width = dist[x]["Prob %"];
        if(dist[x].DEM>49){
         fill = "background-color:#2798da";  
                        var shade2 = ((100-dist[x].DEM)/50)*((x-6)*.1)

            letter = "rgba(39, 152, 218,"+shade2+")"; 
            letterR = "none";  

            if (dist[x].DEM==49){
                note = "<- Current Composition";   
            }else{
            
            }
        }
          else if(dist[x].DEM<49){
         fill = "background-color:#ff352c"; 
            letter = "none";
              var shade = ((100-dist[x].DEM)/50)*((8-x)*.1)
            letterR = "rgba(255, 53, 44,"+shade+")";  
        }
       
        var r = 100-dist[x].DEM;
                var s = 2000*dist[x]["Prob %"];
    document.getElementById("dist").innerHTML+="<tr><td style='background-color:"+letter+"'>"+dist[x].DEM+"</td><td style='background-color:"+letterR+"'>"+r+"</td><td>"+Math.round(dist[x]["Prob %"]*100)+"%</td><td><div id='distBar'style='width:"+s+"px;"+fill+"'></div></td></tr>";
    }
    

$('#map').usmap({
mouseover: function(event, data) {
                 index = states.findIndex(st => st.State === data.name); //change the index to state being moused-over.
    console.log(states[index]);
            if(states[index]==undefined||states[index]==null){
                    document.getElementById("infobox").style.display("none");
             }else{
             }
Georgia(index);     
  },       
          stateStyles: {fill: '#e8e8e8',stroke:"whitesmoke",'stroke-width':0,                          'stroke-linejoin':'bevel'},
stateHoverAnimation: 0,
        showLabels: true,
         stateSpecificStyles: {
        'AL': {fill: color(states[0].DemProb)},
        'AK': {fill: color(states[1].DemProb)},
        'AR': {fill: color(states[2].DemProb)},
        'AZ': {fill: color(states[3].DemProb)},
        'CA': {fill: color(states[4].DemProb)},
        'CO': {fill: color(states[5].DemProb)},
        'CT': {fill: color(states[6].DemProb),stroke:tossup(states[6].DemProb),'stroke-width':tossupLine(states[6].DemProb)},
        'FL': {fill: color(states[7].DemProb),stroke:tossup(states[7].DemProb),'stroke-width':tossupLine(states[7].DemProb)},     
        'GA': {fill: color(states[8].DemProb),stroke:tossup(states[8].DemProb),'stroke-width':tossupLine(states[8].DemProb)},
        'HI': {fill: color(states[9].DemProb)},
        'ID': {fill: color(states[10].DemProb),stroke:tossup(states[10].DemProb),'stroke-width':tossupLine(states[10].DemProb)},
        'IL': {fill: color(states[11].DemProb),stroke:tossup(states[11].DemProb),'stroke-width':tossupLine(states[11].DemProb)},
        'IN': {fill: color(states[12].DemProb)},
        'IA': {fill: color(states[13].DemProb)},
        'KS': {fill: color(states[14].DemProb)},
        'KY': {fill: color(states[15].DemProb)},
        'LA': {fill: color(states[16].DemProb)},
        'MD': {fill: color(states[17].DemProb)},
        'MO': {fill: color(states[18].DemProb)},
        'NV': {fill: color(states[19].DemProb),stroke:tossup(states[19].DemProb),'stroke-width':tossupLine(states[19].DemProb)},
        'NH': {fill: color(states[20].DemProb),stroke:tossup(states[20].DemProb),'stroke-width':tossupLine(states[20].DemProb)},
        'NY': {fill: color(states[21].DemProb)},
        'NC': {fill: color(states[22].DemProb),stroke:tossup(states[22].DemProb),'stroke-width':tossupLine(states[22].DemProb)},
        'ND': {fill: color(states[23].DemProb)},
        'OH': {fill: color(states[24].DemProb),stroke:tossup(states[24].DemProb),'stroke-width':tossupLine(states[24].DemProb)},
        'OK': {fill: color(states[25].DemProb)},
        'OK1': {fill: color(states[26].DemProb)},
        'OR': {fill: color(states[27].DemProb)},
        'PA': {fill: color(states[28].DemProb),stroke:tossup(states[28].DemProb),'stroke-width':tossupLine(states[28].DemProb)},
        'SC': {fill: color(states[29].DemProb)},
        'SD': {fill: color(states[30].DemProb)},
        'UT': {fill: color(states[31].DemProb)},
        'VT': {fill: color(states[32].DemProb)},
        'WA': {fill: color(states[33].DemProb)},
        'WI': {fill: color(states[34].DemProb),stroke:tossup(states[34].DemProb),'stroke-width':tossupLine(states[34].DemProb)}
  },
    stateSpecificLabelBackingStyles: {
      'HI': {fill: color(states[9].DemProb)},
      'CT': {fill: color(states[6].DemProb)},
      'MD': {fill: color(states[27].DemProb)},
        'VT': {fill: color(states[32].DemProb)},
        'NJ': {fill: color(states[22].DemProb)},
        'MA': {fill: color(states[15].DemProb)},
        'DE': {fill: color(states[5].DemProb)},
        'OK1': {fill: color(states[26].DemProb)},

},
    labelBackingHoverStyles:{
      'stroke-width':3,
        'stroke':'292929'
    },
        stateSpecificLabelBackingHoverStyles:{
                'MD': {fill: color(states[27].DemProb)},
        'RI': {fill: color(states[27].DemProb)},
        'NJ': {fill: color(states[22].DemProb)},
        'MA': {fill: color(states[15].DemProb)},
        'DE': {fill: color(states[5].DemProb)},
        'OK1': {fill: color(states[26].DemProb)},

    },
labelRadius:0,
        labelBackingStyles:{fill:'#c9c8c8',stroke:0},
    labelWidth:25,
    labelHeight:25,
    labelTextStyles:{
      'font-family':'Inconsolata',
        'font-size':'15px'
    },
          stateHoverStyles: {'stroke-width': 3,stroke:'#292929'}
    });
  });
    
function hideInfo(){ //hide infobox
        document.getElementById("infobox").style.display="none";
}
    
function Georgia(d){ //pull up infobox
 
    document.getElementById("infobox").style.display="inline-block"; 
    var prob = states[d].DemProb*100;
    if(prob>99){
                document.getElementById("probD").innerHTML=">99%";
                document.getElementById("probR").innerHTML="<1%";
    }
    else if(prob<1){
                document.getElementById("probD").innerHTML="<1%";
                document.getElementById("probR").innerHTML=">99%";    
                 }
    else{
                document.getElementById("probD").innerHTML= Math.round(prob)+"%";
                document.getElementById("probR").innerHTML= 100-Math.round(prob)+"%";
        }    
    if(d==31){ //Special styling for Alaska
            document.getElementById("probD").style.color= "#78bc1a";
        document.getElementById("bar2").style.background = "linear-gradient(90deg, #78bc1a "+prob+"%, #ff352c "+prob+"%)";

    }else{
            document.getElementById("probD").style.color= "#2798da";
            var rProb = 100 - prob;
                document.getElementById("bar2").style.background = "linear-gradient(90deg, #2798da "+prob+"%, #ff352c "+prob+"%)"

}


            document.getElementById("state").innerHTML= states[d].StateName;
            document.getElementById("dCand").innerHTML= states[d].DemCand;
            document.getElementById("rCand").innerHTML= states[d].RepCand;
            document.getElementById("rating").innerHTML=rating(states[d].DemProb);
                document.getElementById("rating").style.backgroundColor=colorT(states[d].DemProb);
if(states[d].Incumbent=="D"){
document.getElementById("currentD").innerHTML= "i ";
document.getElementById("currentR").innerHTML= "";
document.getElementById("currentR").style.display= "none";
document.getElementById("currentD").style.display= "inline";



} if(states[d].Incumbent=="R"){
    document.getElementById("currentR").innerHTML= "i ";
    document.getElementById("currentD").innerHTML= "";
    document.getElementById("currentD").style.display= "none";
    document.getElementById("currentR").style.display= "inline";


}
 if(states[d].Incumbent=="N"){
  document.getElementById("currentR").innerHTML= "";
    document.getElementById("currentD").innerHTML= "";
    document.getElementById("currentD").style.display= "none";
    document.getElementById("currentR").style.display= "none";


}
var margin = Math.round(states[d].DEM-states[d].GOP);
                if(margin>0){
                        document.getElementById("margin").innerHTML= states[d].DemCand+" +"+margin;
                        document.getElementById("margin").style.color= "#2798da";
                 }
                 if(margin==0){
                        document.getElementById("margin").innerHTML= "EVEN";
                        document.getElementById("margin").style.color= "#292929"; 
                 }
                  if(margin<0){
                        document.getElementById("margin").innerHTML= states[d].RepCand+" +"+Math.abs(margin);
                        document.getElementById("margin").style.color= "#ff352c"; 
                 }    
    }
    /*
function countDownFrom(num) {
    let intervalId = setInterval(tick, 1000);
    var DemP = displayProbDem * .01;
    var RepP = displayProbGOP * .01;
    var TieP = displayProbTie * .01;
    function tick() {
        console.log(num);
        num = num - 1;
        var sim = Math.random();     
        if (sim<DemP){
            document.getElementById("random").innerHTML="Dem";
            document.getElementById("random").style.color="#2798da";
        }
        else if (sim>DemP+TieP){
            document.getElementById("random").innerHTML="Rep";
            document.getElementById("random").style.color="#ff352c"; 
        }
        else{
            document.getElementById("random").innerHTML="Tie";
            document.getElementById("random").style.color="gray";

        }
        if (num <= 0) {
            num = 3;
        }
    }
}
countDownFrom(3);
*/
function drawStates(){ //draw the expected makeup of the Senate.
        stateSort();
        document.getElementById("up").innerHTML="";
        document.getElementById("seatLabelD").innerHTML="â†‘ 36 Dem seats not up";
        document.getElementById("seatLabelR").innerHTML="29 GOP seats not up â†‘";

    for (i=0;i<36;i++) {
    document.getElementById("up").innerHTML+="<div class='blockD'></div>";
    }

    for (x in states2) { 
        var index2 = states.findIndex(st => st.State === states2[x].State);
        document.getElementById("up").innerHTML+="<div class='block' style='background-color:"+color(states2[x].DemProb)+";' onmouseover='Georgia("+index2+")' onmouseout='hideInfo()'></div>";
if(x==13){
    document.getElementById("up").innerHTML+="<div id='maj'></div>";
        }
    }
      for (i=0;i<29;i++) {
    document.getElementById("up").innerHTML+="<div class='blockR'></div>";
    }
}
    
function drawCurrentStates(){ //draw the current makeup of the Senate.
            document.getElementById("seatLabelD").innerHTML="50 Democratic Seats";
            document.getElementById("seatLabelR").innerHTML="50 Republican Seats";

        document.getElementById("up").innerHTML="";
    for (i=0;i<50;i++) {
    document.getElementById("up").innerHTML+="<div class='block' style='background-color:#2798da'></div>";
    }
      for (i=0;i<50;i++) {
    document.getElementById("up").innerHTML+="<div class='block' style='background-color:#ff352c'></div>";
          if(i==50){
    document.getElementById("up").innerHTML+="<div id='maj'></div>";
        }
    }
}   
function colorT(d){ //use this to color the states based on prob.
    if(d<=.05){
        return '#ff352c';
    } 
    if(d<=.25){
        return '#ff8d77';
    } 
        if(d<=.40){
    return '#ffc9bb';
        }  
        if(d<=.60){
    return '#fcfcfc';
}
        if(d<=.75){
    return '#c8e0fa';
}  
    
        if(d<=.95){
    return '#8ac3f4';
}  
        if(d<=1){
    return '#2798da';
} 
}
    function rating(d){ //use this to color the states based on prob.
    if(d<=.05){
        return 'Solid R';
    } 
   else if(d<=.25){
        return 'Likely R';
    } 
        if(d<=.40){
    return 'Lean R';
        }  
        if(d<=.60){
    return 'Tossup';
}
        if(d<=.75){
    return 'Lean D';
}      
        if(d<=.95){
    return 'Likely D';
}  
        if(d<=1){
    return 'Solid D';
}  
}
    
function colorZ(d){ //use this to color the states based on prob.
    if(d<=.1){
        return '#ff352c';
    } 
    if(d<=.2){
        return '#ff715b';
    } 
        if(d<=.30){
    return '#ff9a85';
        }  
                if(d<=.40){
    return '#ffbeae';
}
            if(d<=.50){
    return '#ffdfd6';
}
        if(d<=.60){
    return '#deeafd';
}
        if(d<=.70){
    return '#bcd5fb';
}   
        if(d<=.80){
    return '#97c1f9';
}
        if(d<=.90){
    return '#6badf6';
}  
        if(d<=1){
    return '#1e9af3';
}  
}
function color(d){ //use this to color the states based on prob.
    if(d<=.1){
        return '#ff352c';
    } 
    if(d<=.2){
        return '#ff715b';
    } 
        if(d<=.30){
    return '#ff9a85';
        }  
                if(d<=.40){
    return '#ffbeae';
}
            if(d<=.50){
    return '#ffdfd6';
}
        if(d<=.60){
    return '#dceaf8';
}
        if(d<=.70){
    return '#b9d4f1';
}   
        if(d<=.80){
    return '#93c0e9';
}
        if(d<=.90){
    return '#68ace2';
}  
        if(d<=1){
    return '#2798da';
}  
}    
function colorS(d){
        if(d>.4&&d<.6){
        return '2px solid black';
    }else{}
}
    
    function tossup(d){
        if(d<.6 && d>.40){
            return '#292929';
        }
    }
 function tossupLine(d){ 
        if(d<.6 && d>.40){
            return '2';
        }else{
            return '0';
        }
    }

</script>

<style>
@import url('https://fonts.googleapis.com/css?family=Arimo:400,700|Inconsolata:400,700');
:root {
  --main-bg-color: brown;
    }
    svg{
        font-family: 'Inconsolata'
    }

    body{
        font-family: HelveticaNeue,Arial,sans-serif;
        font-weight: bold;
        background-color: whitesmoke;
    }
    #container{
        padding:15px;
    }
    #bar{
        width: 100%;
        height:30px;
        float:left;
        display: inline-block;
    }
    #bar2{
        width: 100%;
        height:15px;
    }
    #toplineD,#toplineR,#dSeatAvg,#rSeatAvg{
        font-size: 25pt;
    }
    #demProb{
width:61.73%;
        height: 100%;
        background-color: #2798da;
        float:left;
    }
     #tieProb{
width:10.55%;
        height: 100%;
        background-color: #8b8b8b;
         background: repeating-linear-gradient(
  45deg,
  #525252,
  #525252 5px,
  #f5f5f5 5px,
  #f5f5f5 10px
);
    float:left;
    }
    #repProb{
        width:27.72%;
        height: 100%;
        background-color: #ff352c;
                 float:left;
    }
    #keybox{
      position: relative;
top: -100;
left:10;
border: 3px solid black;
width: 180px;
padding: 5px;
height: 80px;
display: table;
background-color: #f5f5f5;
 box-shadow: 5px 5px 0px black;
}
    
    #info{
        margin-bottom: 35px;
    }

    #map{
        position: relative;
        left:25%;
    }
    #lower{
      width:100%;  
        display: inline-block;
        border-top:3px solid;
    }
    .dem{
        float:left;
        color: #2798da;
        font-size:21pt;
    }
    .gop{
        float:right;
        color: #ff352c;
        font-size:21pt;
        text-align: right;
    }
    button{
        border: 2px solid #292929;
        color:#292929;
        background-color: whitesmoke;
        font-weight: bold;
        outline: none;
        padding: 5px;
        margin: 0px;
        text-align: center;
        cursor: pointer;
    }
    button:hover{
        background-color: #292929;
        color:whitesmoke;
    }
    .meter{
        height: 100%;
        display: block;
    }
    #infobox{
        border:3px solid #292929;
        background-color: rgba(255, 255, 255, .97);
        text-align: left;
        width:225px;
        padding: 10px;
        z-index: 1;
    }
    #info-container{
        width:225px;
        height:150px;
        position: absolute;
   }
    #state{
        font-size: 15pt;
    }
    #notupD{
        background-color: #2e9af3;
    float:left;
    }
    hr{
        border: 1px solid #292929;
    }
  
     #notupR{
        background-color: #ee5e3c;
        width:100%;
        float: right;
    }
    #topline{
        display: inline-block;
        border-bottom: 3px solid #292929;
        padding-bottom: 10px;
        width:100%;    
    }
    #key,#dist{
        border-collapse: collapse;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
    font-size: 8pt;
        font-family: 
    }
    td{
        padding:7px;
        border:1px solid whitesmoke;
        color:black;
    }
    iframe{
      border: none;
    }
    #GA{
        height:20px;
        width:20px;
        background-color: #e0e0e0;
        padding:15px;
        color:#292929;
        position: relative;
        left:80%;
        top:-175px;
        font-size: 11pt;
        text-align: center;
    }
    #GA:hover{
        outline:3px solid #292929;
    }
    #tag{
        text-decoration: underline;
        cursor:pointer;
    }
    #currentD{
      float:left;
      background-color: #2798da;
      width: 10px;
      border: 1px solid white;
      font-size: 8pt;
      text-align: center;
      color:whitesmoke;
      font-family: 'Inconsolata';
    }
    #currentR{
      background-color: #ff352c;

      float:right;
      width: 10px;
      border: 1px solid white;
      font-size: 8pt;
      text-align: center;
      color:whitesmoke;
      font-family: 'Inconsolata';
    }
    #tag:hover{
text-decoration: none;
    }
    #map-display{
        width:100%;
        height:550px;
        overflow:hidden;
        text-align: center;
        padding-top:25px;   
    }
    #states-container{
        width: 100%;
        padding: 0;
    }
    .block,.blockD,.blockR{
         height:30px;
        width:1%;
        padding:0px;
                float:left;
    }
    #random{
          transition: color 1s;

    }
    .block{
        outline:1px solid whitesmoke;
        background-color: #e0e0e0;
        color:#292929;
        float:left;
        text-align: center;
        cursor:crosshair;
    }
    .blockD{
        background-color: rgba(4, 119, 218, 0.25);
        outline:1px solid whitesmoke;
    }
    .blockR{
        background-color: rgba(212, 50, 1, 0.25);
        outline:1px solid whitesmoke;

    }
     #maj{
        height:30px;
        background-color:none;
        outline:1px solid black;
        color:#292929;
        float:left;
        text-align: center;
        font-size:9pt;
         opacity: .9;
    }
    .block:hover{
        outline:3px solid #292929;
        opacity: .9;
    }
    #distBar{
        height:25px;
        background-color: gray;
    }
    #dist td{
        border-right:1px solid #292929;
        font-family: 'Inconsolata';
        font-size: 9pt;
        font-weight: 100;
    }
    #dist td:nth-child(3){
    }
        #dist td:nth-child(4){
padding:0px;
border-bottom: 1px solid #292929;
    }
    #dist th{
        border-bottom: 2px solid #292929;
    }
    #rater{
        font-size:9pt;
        text-align: center;
    width: 100%;
        border-collapse: collapse;
        font-weight: bold;
        border:0;
    }
    #rater td{
        padding:2px;
    }
    #rating{
      width:50px;
      float: right;
      padding:5px;
      font-size: 9pt;
      text-align: center;
    }
    #current{
              border: 3px solid rgba(0, 0, 0, 0);  
    }
@media only screen and (max-width: 600px) {
    #map{
        left:4%;
    }
    #map-display{
        height:400px;
    }
    .blockD,.blockR{
        display: none;
    }
    .block{
        width:2.857%;
    }
    }
</style>